\input{config/header}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% document specific %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% define the author, title etc
\globalTitle{Interpreter Manual}
\globalSubject{setlX \input{version}}
\globalAuthor{Herrmann, Tom}
\globalDate{\today}
\globalKeywords{readme}

% frequently used configuration options
\setboolean{linkHighlighting}{true}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% setup %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{config/configuration}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% document text %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\begin{titlepage}
\maketitle

\vfill

\begin{center}
\Large
``Computers make very fast, very accurate mistakes.''
\end{center}

\vfill
\tableofcontents
\end{titlepage}

\section{Overview}

This is the manual of \setlX, an interpreter for the \SetlX{} programming-language.

The \SetlX{} language was mostly designed by Prof. Dr. Karl Stroetmann and is an evolution of \SetlTwo{} by Kirk Snyder and especially the original \Setl{} by Jack Schwartz. It was specifically conceived to make the features of \Setl{} more accessible to today's students of set theories.

The \setlX{} interpreter, which currently is the \SetlX{} reference implementation, was implemented by Tom Herrmann. You may send bug-reports and\slash{}or questions about the \setlX{} interpreter via e-mail to \mailto{setlx@randoom.org}.

\section{Usage}

The \setlX{} interpreter has two basic modes of operation:
\begin{itemize}
	\item file execution mode
	\item interactive mode
\end{itemize}

The `file execution mode' will be started if one or more paths to code files are supplied as parameters for this program. These files will then be parsed and executed in the order in which they are listed as parameters. When executing multiple files, they share the outermost scope.

When no paths are supplied, the `interactive mode' will be started.\\
Note that input will be executed after entering an additional empty line. Hereby multiple lines of input can be parsed and evaluated. Executing the `\command{exit;}' statement will terminate the interpreter.

\nonSubsection{Additional parameters}

In addition to file-paths a number of options can be used when running \setlX{}:

\begin{itemize}
	\param{--help}
	      {displays some helpful information}
	\param{--predictableRandom}
	      {always returns the same pseudo random sequence of numbers from the internal random number generator (for debugging)}
	\param{--real32\\
	       --real64\\
	       --real128\\
	       --real256}
           {sets the width of the real-type in bits (64 is the sane default)}
	\param{--verbose}
           {display the parsed program before executing it (has no effect in interactive mode)}
	\param{--version}
           {displays the interpreter version and terminates}
\end{itemize}

\section{Installing}

To comfortably use \setlX{} it may be installed into once search-path. After this is done, it may be just like any other program on your system.

\subsection{Unix-like OS (Linux, MacOS X, etc.)}

\begin{enumerate}
	\item Copy the `\command{setlX.jar}'-file into some folder, which is accessible by all users, who should be able to execute \setlX{} (e.g. `\command{/usr/local/setlX/}').\\
	You may also copy it into the home directory of some user, when he is the only \setlX-user on the system (e.g. `\command{/home/<user>/programs/setlX/}').
	\item Open the `\command{setlX}'-script in your favorite editor (like `\command{vi}' or `\command{emacs}').
	\item Change the contents of the `\command{setlXJarLocation}'-variable to the full path of the copied jar-file, including the filename itself, e.g.
\begin{lstlisting}[frame=none,numbers=none]
setlXJarLocation="/usr/local/setlX/setlX.jar"
\end{lstlisting}
	\item Save and close the file.
	\item Copy the modified `\command{setlX}'-script into some folder, which is in the search path of all users which should be able to execute \setlX{} (e.g. `\command{/usr/local/bin}').\\
	When only used by one user, you may copy it into the `bin' directory in his home instead (e.g. `\command{/home/<user>/bin}').
	\item Make the copied script executable, e.g.
\begin{lstlisting}[frame=none,numbers=none]
chmod +x /usr/local/bin/setlX
\end{lstlisting}
\end{enumerate}

\subsection{Microsoft Windows}

\begin{enumerate}
	\item Copy the `\command{setlX.jar}'-file into some folder, which is accessible by all users, who should be able to execute \setlX{} (e.g. `\command{C:\textbackslash{}Progam Files\textbackslash{}setlX\textbackslash{}}').
	\item Open the `\command{win-setlX.cmd}'-script in your favorite editor.
	\item Change the contents of the `\command{setlXJarLocation}'-variable to the full path of the jar-file, including the filename itself, e.g.
\begin{lstlisting}[frame=none,numbers=none]
set setlXJarLocation=C:\Progam Files\setlX\setlX.jar
\end{lstlisting}
	\item Save and close the file.
	\item Copy the modified `\command{win-setlX.cmd}'-script into the folder, where you want to work with \setlX{} programs.
\end{enumerate}

\section{Launching}

\subsection{Unix-like OS (Linux, MacOS X, etc.)}

After installation, the \setlX{} interpreter can be launched by opening a terminal and executing a SetlX program

\begin{lstlisting}[frame=none,numbers=none]
setlX <path>/<name>.stlx
\end{lstlisting}

or launching the interactive mode:

\begin{lstlisting}[frame=none,numbers=none]
setlX
\end{lstlisting}

\subsection{Microsoft Windows}

\begin{center}
\large
``Here's a nickel kid. Go buy yourself a real computer.''\footnote{In reference to \url{http://dilbert.com/1995-06-24}}
\end{center}

After installation, the \setlX{} interpreter can be launched by opening Microsoft's sort-of-terminal (`Command Prompt'), changing into the directory where you placed the `\command{win-setlX.cmd}'-script, e.g.

\begin{lstlisting}[frame=none,numbers=none]
cd /d C:\Users\DemoUser\education\setlX
\end{lstlisting}

and executing a SetlX program

\begin{lstlisting}[frame=none,numbers=none]
win-setlX.cmd <path>\<name>.stlx
\end{lstlisting}

or launching the interactive mode:

\begin{lstlisting}[frame=none,numbers=none]
win-setlX.cmd
\end{lstlisting}

It might be possible to execute a \SetlX{} file by dragging it onto the `\command{win-setlX.cmd}' script or to launch the interpreter mode by simply double clicking this script.

\section{Building from source}

Optionally, when the interpreter source is available, the interpreter can be (re)build.

On Unix, the interpreter can be intelligently (re)build by executing

\begin{lstlisting}[frame=none,numbers=none]
make
\end{lstlisting}

in the `\command{src}' folder.

On Windows the interpreter can be rebuild from scratch by executing
\begin{lstlisting}[frame=none,numbers=none]
win-make.cmd
\end{lstlisting}

in the `\command{src}' folder.

On both platforms a self-contained `.jar' file will be created. This file can be launched on all Java-Platforms without additional scripts, jars or environment-variables by executing

\begin{lstlisting}[frame=none,numbers=none]
java -jar setlX.jar <path>/<name>.stlx
\end{lstlisting}

or

\begin{lstlisting}[frame=none,numbers=none]
java -jar setlX.jar
\end{lstlisting}

However, the \command{setlX} and \command{win-setlX.cmd} scripts can also be used to launch the jar build by this process.

\section{System Requirements}

To run \setlX{} a Java runtime (JRE) is required, which is compatible to Java version 1.6 (aka version 6) or higher. Running it with Version 1.5 (aka version 5) is largely untested, but should work. However recompilation from source might be required.

When building from source, the corresponding Java Development Kit (JDK) has to be present as well.

The hardware requirements are highly dependent on the executed \SetlX{} program. For optimal performance in most situations at least 512 MB of free main-memory should be available.

\section{Limitations}

\subsection{Stack Overflow \slash{} Out of Memory Error}

Due to its implementation and execution by the Java Virtual Machine (JVM), a `stack overflow' error may be encountered when executing highly recursive \SetlX{} programs. An `out of memory error' might also be encountered when using very large or very many sets and\slash{}or lists.

The JVM is unable to dynamically increase its internal stack size at all and the heap space only in very limited bounds, no matter how much free memory is available.

To work around these problems, edit the used launching script (`\command{setlX}' or `\command{win-setlX.cmd}') with a text editor and follow the directions given at the top of the script.

%\section{Known Bugs}
%The following bugs are known to be present in this version of the interpreter:
%
%\begin{itemize}
%	\item ...
%\end{itemize}


\section{Disclaimer}
You may distribute \setlX{}, to anyone and for any purpose, and make changed to it, even without permission from the author or notice to the author, as long as you do not remove any copyright information, and also comply with the antlr license.

This program uses the antlr parser generator in version 3.3. As per its license antlr is not guaranteed to work and might even destroy all life on this planet. The full text of this license is shown in figure \ref{lblAntlr}. Note however, that it only applies to the antlr components and NOT to the rest of the interpreter.

\includeListing[e]{../src/antlr/antlr_LICENSE.txt}{}{lblAntlr}{}{License used by antlr v3.3}


\end{document}
