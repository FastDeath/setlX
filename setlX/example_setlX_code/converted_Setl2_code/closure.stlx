
closure := procedure(A) {
	Temp := A;
	while (true) {
		old_Temp := Temp;
		Temp := A + compose(A, Temp);
		if (Temp == old_Temp) {
			return Temp;
		}
	}
};

compose := procedure(A1, A2) {
	return {[[x, z], d1 + d2]: [[x, y1], d1] in A1, [[y2, z], d2] in A2 | y1 == y2};
};

A3 := {[["a", "b"], 1], [["b", "c"], 2], [["c", "d"], 10]};
print(closure(A3));

